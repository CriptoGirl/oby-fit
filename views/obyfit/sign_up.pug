extends ../layout

block content
  //<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  //<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  br
  h2 Start ObyFit Challenge

  // JavaScript section

  // Form sections

  // Step 1 : Google Authorisation Form
  if step_1
    form(method='POST' action='/sign_up')
      input.form-control(
       id='form_action'
       name='form_action'
       value='authorise'
       type='hidden'
      )
      br
      h5 Step 1. Authorise ObyFit access to your Google Fit data
      p Please click on Authorise button and grant ObyFit read access to your Google Fit data.
      div.form-group
        div.form-row
            button.btn.btn-primary.ml-2(type='submit') Authorise

  // Step 2 : User Data Form
  if step_2
    form(method='POST' action='/sign_up')
      input(
       id='form_action'
       name='form_action'
       value='save_user_data'
       type='hidden'
      )
      input(
       id='google_authorization_code'
       name='google_authorization_code'
       value=google_authorization_code
       type='hidden'
      )
      input(
       id='refresh_token'
       name='refresh_token'
       value=refresh_token
       type='hidden'
      )
      br
      h5 Step 1. Authorise ObyFit access to your Google Fit data
      p Thank you for granting ObyFit read access to your Google Fit data.
      br
      div.alert.alert-success.alert-dismissible(id='result')
        a.close( href='#' data-dismiss='alert' ) ×
        h4 Step 1 completed
        p= Access to Google Fit data granted.
      br
      h5 Step 2. Specify your Obyte testnet wallet address
      p Please provide us with your Obyte testnet wallet address.
      div.form-group
        div.form-row
          div.col-md-3
            label(for='wallet' ) Obyte Wallet Address:
            input.form-control(
              id='wallet'
              name='wallet'
              required
            )
      div.form-group
        div.form-row
          div.btn-toolbar
            button.btn.btn-primary.ml-2(type='submit') Save

  // Step 3 : Result Section
  if step_3
    form(method='POST' action='/sign_up')
      h5 Step 1. Authorise ObyFit access to your Google Fit data
      p Thank you for granting ObyFit read access to your Google Fit data.
      br
      div.alert.alert-success.alert-dismissible(id='result')
        a.close( href='#' data-dismiss='alert' ) ×
        h4 Step 1 completed
        p= Access to Google Fit data granted.
      br
      h5 Step 2. Specify your Obyte testnet wallet address
      p Thank you for providing your Obyte testnet wallet address.
      br
      div.alert.alert-success.alert-dismissible(id='result')
        a.close( href='#' data-dismiss='alert' ) ×
        h4 Step 2 completed
        p= Your wallet address data is saved.
      h5 Step 3. Deposit your prize to the ObyFit Autonomous Agent
      p Send 1,020,000 bytes to the ObyFit Autonomus Agent to enter the 7-day walking challenge.
      div.form-group
        div.form-row
          a.button.btn.btn-primary.ml-2(href="byteball-tn:IOSRPEX2BXEV6KNFBJTCAA32MT7NDI5L?amount=1020000&amp;asset=base")='Send Prize'

  if error
    form(method='POST' action='/sign_up')
      div.form-group
        div.form-row
          div.col-md-3
            label(for='email' ) E-mail:
            input.form-control(
              id='email'
              name='email'
              type='email'
              required
              value= email
            )
          div.col-md-3
            label(for='wallet' ) Obyte Wallet Address:
            input.form-control(
              id='wallet'
              name='wallet'
              required
              value= wallet
            )
        hr
      div.form-group
        div.form-row
          div.btn-toolbar
            button.btn.btn-primary.ml-2(type='submit') Sign up
            button.btn.btn-primary.ml-2(type='submit' disabled) Authorise
            button.btn.btn-primary.ml-2(type='submit' disabled) Prize
    br
    div.alert.alert-danger.alert-dismissible(id='error')
      a.close( href='#' data-dismiss='alert' ) ×
      strong Error:
      span  User data can not be saved !
      span= error

  br
  br
  br
